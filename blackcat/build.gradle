/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.5/userguide/java_library_plugin.html
 */
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.ajoberstar:gradle-git:0.8.0'
    }
}

// Apply the java-library plugin to add support for Java Library
apply plugin: 'java-library'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
sourceSets.main.java.srcDirs = ['src/main/java', 'src/main/resources']
sourceSets.test.java.srcDirs = ['src/test/java', 'src/test/resources']

apply plugin: 'eclipse-wtp'

// In this section you declare where to find the dependencies of your project
group = 'org.blackcat'
jar.baseName = 'blackcat'
version = '0.0.1'
sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

configurations {
    providedRuntime
}

ext.revision = ""
ext.compileDate = ""
task buildInfo {
    try {
        def grgit=org.ajoberstar.grgit.Grgit.open(project.file('.'))
        println "revision: " + grgit.head().id
        revision=grgit.head().id
    } catch(Exception){
        println "There is no repository in project path and ignore to set commitId to META-INF."
    }
    compileDate=new Date()
    println "compile date: " + compileDate
}

dependencies {

    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'

    compileOnly group: 'org.apache.taglibs', name: 'taglibs-standard-jstlel', version:'1.2.1'
    compileOnly group: 'commons-dbcp', name: 'commons-dbcp', version:'1.4'
    compileOnly group: 'commons-dbutils', name: 'commons-dbutils', version:'1.5'

    compileOnly group: 'commons-beanutils', name: 'commons-beanutils', version: '1.8.3'
    compileOnly group: 'commons-cli', name: 'commons-cli', version: '1.2'
    compileOnly group: 'commons-codec', name: 'commons-codec', version: '1.11'
    compileOnly group: 'commons-collections', name: 'commons-collections', version: '3.2.1'
    compileOnly group: 'commons-discovery', name: 'commons-discovery', version: '0.5'
    compileOnly group: 'commons-fileupload', name: 'commons-fileupload', version: '1.2.2'
    compileOnly group: 'commons-httpclient', name: 'commons-httpclient', version: '3.1'
    compileOnly group: 'commons-io', name: 'commons-io', version: '2.4'
    compileOnly group: 'org.apache.commons', name: 'commons-lang3', version: '3.3.1'
    compileOnly group: 'commons-logging', name: 'commons-logging', version: '1.1.1'
    compileOnly group: 'wsdl4j', name: 'wsdl4j', version: '1.6.2'
    compileOnly group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.7'
    compileOnly group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.7'
    compileOnly group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.6.5'
    compileOnly group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.6.5'
    compileOnly group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.6.5'
    compileOnly group: 'org.springframework', name: 'spring-core', version: '4.3.11.RELEASE'
    compileOnly group: 'org.springframework', name: 'spring-context', version: '4.3.11.RELEASE'
    compileOnly group: 'org.springframework', name: 'spring-beans', version: '4.3.11.RELEASE'
    compileOnly group: 'org.springframework', name: 'spring-web', version: '4.3.11.RELEASE'
    compileOnly group: 'org.springframework', name: 'spring-webmvc', version: '4.3.11.RELEASE'
}

jar {
    manifest {
        attributes 'revision': revision
        attributes 'compile-date': compileDate
    }
}
